クリックサンプルコード ver1.02 2013/2/28

ソリューションエクスプローラーでソースファイルのところ右クリック→追加→既存の項目
でClickableImage.cpp, ClickableImage.hを入れてください．
ClickableImage.cpp, ClickableImage.hは，既存のファイル(main.h[OpenCVのlibファイルを結合するファイル])等があるところ．

１．使いたいcppファイルのどこかで #include "ClickableImage.h"を宣言

２．変数だけ用意して呼び出してあげれば，ウインドウが二つ開きます．
使い方はmain.cpp参照

３．"Ctrlキーを押しながら"ウインドウ内の画像を左クリックすると番号と点が描画されます．
　・'c'を押すとclearします(点が全て消えて初期化されます)．
　・'q'を押すと関数が帰ってきますが，対応点の数が違うと終了しません．
　・"Altキーを押しながら"ウィンドウ内の画像を左クリックでアンドゥ．
　・'p'キーを押してからファイル名を入力すると，現在の(点を選択した時の点の描画も入っている)画像がキャプチャできます．

４．clickLoopの関数から帰ってきますが，point[0]とpoint[1]にそれぞれのクリックした点の座標が入っています．

５．あとはそれを単純に関数に突っ込むだけでHomographyやF-matrixが計算できます．


３．のところで，さらに"Ctrlキー"を押しながら右クリックすると，緑の'R'で出てくる点が表示されます．
このRの座標がMat型で関数の引数(epipolarPoint[0], epipolarPoint[1])に格納されます．
この座標をエピポーラ線描画に使ってみてください．

このコードについては理解は不要(というか汚くややこしいので無理)ですが興味があったら中身を調べて覗いてみてください．

サンプルでHomography用の画像みたいなものを付けましたがこれはあまりよろしくない例です．
画像は自分で探すなり撮影するなりして，いろいろ考察してみてください！

※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※
main.hでopencv_calib3d○○○(d).libが#pragma commentされてないとfindHomographyとかが動きません．注意！
※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※